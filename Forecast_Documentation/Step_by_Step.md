# Forecast step-by-step guide.

## Installation
Please follow the instructions in the Forecast readme to set up the tool. Forecast has been successfully installed on Ubuntu and Debian operating systems. Some of the required packages do not currently work with Windows. During setup, users may encounter errors in installing packages. If this is the case, continue installing the other packages, and then try installing the previous ones again.

## Collecting a memory image
Forecast currently works with Windows memory dumps. The effectiveness of the Forecast tool will depend on the quality of the memory dump used. If a user does not already have a memory dump, there are numerous ways to collect one, including the following:
1.	The most basic way of collecting a windows memory dump is to use task manager. In order to collect a memory dump with task manager, open task manager and find the desired process, right click the process, and select “Create Dump File.” The file will be placed in C:\Path_to_user_directory\AppData\Local\Temp. A drawback of this method is that the user does not have control of the state of memory when the process is dumped.
2.	Another way of taking a memory dump is to use the Window’s Sysinternals tool ProcDump. ProcDump is a command line tool for taking memory dumps. The documentation for the tool can be found [here](https://docs.microsoft.com/en-us/sysinternals/downloads/procdump).
3.	A more controlled method of taking a memory dump is the Auto_Dumper tool, which was developed to effectively collect memory dumps to work with Forecast. The tool uses GDB and ProcDump to collect a memory dump at a specified position in memory. The tool and its documentation can be found [here](https://github.com/CyFI-Lab-Public/Forecast/tree/master/Auto_Dumper). It is important to capture the malicious activity in memory before it executes, so it is recommended to take the take the memory dump at an early address, such as the main function. To locate the main function, it may be necessary to use reverse engineering software, such as IDA or Ghidra.

**Please note, when collecting a memory dump of a malware sample, exercise caution!** A malware should only be executed in a safe environment, apart from any valuable systems, files, or software. The safest way to execute a malware sample and collect a memory dump is to do so within a virtual machine with precautionary measures in place to avoid accidental infections. The memory dump can then be collected and analyzed on a separate machine with Forecast installed. For instance, a user could run a Windows 7 virtual machine as a detonation chamber, and an Ubuntu virtual machine with Forecast installed. The user can run the malware on the Windows machine, and after the malware is run, the user can use scp from the Ubuntu machine to collect the sample from the detonation chamber. The detonation chamber can then be restored to a previous snapshot.

## Running Forecast
To run Forecast, enter the /Forcast/scripts directory and use the script `run_minidump.py /path_to_minidump/sample_dump.dmp`
Forecast will produce color coded output as it explores the memory dump. Please note, Forecast outputs to Stderr rather than Stdout, so if a user wants to save Forecast output to a file, that user should use 2> to direct the output, such as:  `run_minidump.py /path_to_minidump/sample_dump.dmp 2> forecast_output.txt`. The resulting file can be viewed with less -r: `less -r forecast_output.txt`. The less command will ask: `“forecast_output.txt” may be a binary file.  See it anyway?`, to which the user can type `y` to view the file.
